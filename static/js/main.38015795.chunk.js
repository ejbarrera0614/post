(this["webpackJsonppost-app"]=this["webpackJsonppost-app"]||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(2),r=n.n(a),i=n(28),s=n.n(i),o=n(7),d=n(20),l=n(5),j=function(){return Object(c.jsx)("h1",{children:"Inicio de sesi\xf3n"})},u="/",b="/iniciar-sesion",O="data/lang-es.json",m=n(3),p=function(e){var t=e.children,n=e.isLoading,a=void 0===n||n;return Object(c.jsx)(c.Fragment,{children:a?Object(c.jsxs)("div",{className:"lds-ring",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]}):Object(c.jsx)(c.Fragment,{children:t})})},h=n(11),f=n.n(h),x=n(14),g=Object(a.createContext)([]),v=g.Provider,N=g,w=n(24);n(37);w.a.initializeApp({apiKey:"AIzaSyCNmqLe1d9z6esEbyQQ4wcIFA9EUA-Z0H4",authDomain:"publicaciones-999c8.firebaseapp.com",projectId:"publicaciones-999c8",storageBucket:"publicaciones-999c8.appspot.com",messagingSenderId:"551474545342",appId:"1:551474545342:web:09126c401dd5f503f4d4ef"});var S=w.a.firestore(),y=S.collection("post-test"),F=S.collection("comments"),E=n(19),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1],i=function(){r(e)},s=function(e){var t=e.target;r(Object(m.a)(Object(m.a)({},c),{},Object(E.a)({},t.name,t.value)))};return[c,s,i]},D=n.p+"static/media/userIcon.18fcee80.png",R=function(e){var t=e.nameAuthor,n=e.desc,a=e.date,r=new Date(null===a||void 0===a?void 0:a.toDate()).toLocaleDateString();return Object(c.jsxs)("div",{className:"comment",children:[Object(c.jsx)("div",{className:"item-profile",children:Object(c.jsx)("img",{className:"profile-img",src:D,alt:t})}),Object(c.jsxs)("div",{className:"comment-section",children:[Object(c.jsx)("h4",{children:t}),Object(c.jsx)("p",{children:n}),Object(c.jsx)("p",{className:"w-100",children:r})]})]})},L=function(e){var t=e.id,n=e.desc,r=e.nameAuthor,i=e.date,s=e.index,d=new Date(null===i||void 0===i?void 0:i.toDate()).toLocaleDateString(),l=A({comment:""}),j=Object(o.a)(l,3),u=j[0],b=j[1],O=j[2],h=function(e){var t=function(){try{var t=function(){var t=Object(x.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.where("idPost","==",e).orderBy("date","desc").get();case 2:t.sent.forEach((function(e){n.push(e.data())})),s.current&&i(Object(m.a)(Object(m.a)({},r),{},{data:n,loading:!1,error:null}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=[];t()}catch(c){i(Object(m.a)(Object(m.a)({},r),{},{data:null,loading:!1,error:c}))}},n=Object(a.useState)({action:t,data:[],loading:!0,error:null}),c=Object(o.a)(n,2),r=c[0],i=c[1],s=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return s.current=!0,t(),function(){s.current=!1}}),[]),r}(t),g=h.action,v=h.data,w=h.loading,S=function(){var e=Object(a.useContext)(N).setStateModal,t=Object(a.useState)({action:function(t){r(Object(m.a)(Object(m.a)({},c),{},{loading:!0})),F.add(t).then((function(e){e.set({id:e.id},{merge:!0}).then((function(){r(Object(m.a)(Object(m.a)({},c),{},{loading:!1,error:null,isFirtsRender:!1}))}))})).catch((function(){r(Object(m.a)(Object(m.a)({},c),{},{loading:!1,error:"Ocurrio un error",isFirtsRender:!1})),e({isShow:!0,title:"Ocurri\xf3 un error.",desc:"No se pudo agregar el comentaro, intenta m\xe1s tarde.",icon:"error"})}))},loading:!1,error:null,isFirtsRender:!0}),n=Object(o.a)(t,2),c=n[0],r=n[1];return c}(),y=S.action,E=S.loading,L=S.isFirtsRender;Object(a.useEffect)((function(){L||E||(O(),g())}),[E]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"post-item my-2 ".concat(0===s&&"animate__fadeInDown"),children:[Object(c.jsxs)("div",{className:"post-item-content",children:[Object(c.jsx)("div",{className:"item-profile",children:Object(c.jsx)("img",{className:"profile-img",src:D,alt:r})}),Object(c.jsxs)("div",{className:"post-item-desc",children:[Object(c.jsxs)("div",{className:"post-desc-group-name",children:[Object(c.jsx)("p",{className:"post-item-name",children:r}),Object(c.jsx)("p",{className:"post-item-time",children:d})]}),Object(c.jsx)("p",{className:"post-item-desc",children:n}),Object(c.jsxs)("div",{className:"post-item-buttons",children:[Object(c.jsx)("button",{children:"Reaccionar"}),Object(c.jsx)("button",{children:"Comentar"})]})]})]}),Object(c.jsxs)("div",{className:"post-item-reaction",children:[Object(c.jsx)("p",{children:"Reacciones"}),Object(c.jsxs)("p",{children:[v.length," comentario",v.length>1&&"s"]})]}),Object(c.jsx)("div",{className:"comments-list",children:Object(c.jsx)(p,{isLoading:w,children:(null===v||void 0===v?void 0:v.length)?v.map((function(e,t){return Object(c.jsx)(R,Object(m.a)(Object(m.a)({},e),{},{index:t}),e.id)})):Object(c.jsx)("p",{children:"No hay comentarios"})})}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),y({date:new Date,desc:u.comment,idAuthor:"KWfShEgVFQoLdDoULkw8",idPost:t,nameAuthor:"Admin"}),O()},className:"comment-form",children:[Object(c.jsx)("textarea",{name:"comment",placeholder:"Escribe un comentario",autoComplete:"off",rows:"1",className:"comment",value:u.comment,onChange:b}),Object(c.jsx)(p,{isLoading:!1,children:Object(c.jsx)("button",{type:"submit",disabled:!u.comment,children:Object(c.jsx)("span",{children:"Publicar"})})})]})]})})},k=function(e){var t=e.getAllPost,n=A({post:""}),r=Object(o.a)(n,3),i=r[0],s=r[1],d=r[2],l=function(){var e=function(){var e=Object(x.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(Object(m.a)(Object(m.a)({},r),{},{loading:!0})),y.add(n).then((function(e){e.set({id:e.id},{merge:!0}).then((function(){i(Object(m.a)(Object(m.a)({},r),{},{loading:!1,error:null,isFirtsRender:!1})),t({title:"Estado creado",desc:"Se ha creado la publicaci\xf3n",isShow:!0})}))})).catch((function(){i(Object(m.a)(Object(m.a)({},r),{},{loading:!1,error:"Ocurrio un error",isFirtsRender:!1})),t({isShow:!0,title:"Ocurri\xf3 un error.",desc:"No se pudo crear la publicaci\xf3n, intenta m\xe1s tarde.",icon:"error"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=Object(a.useContext)(N).setStateModal,n=Object(a.useState)({action:e,loading:!1,error:null,isFirtsRender:!0}),c=Object(o.a)(n,2),r=c[0],i=c[1];return r}(),j=l.action,u=l.loading,b=l.isFirtsRender;Object(a.useEffect)((function(){b||u||(d(),t())}),[u]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j({date:new Date,desc:i.post,idAuthor:"e3Op7jLzPe3gJIdbmmzH",nameAuthor:"Juan 2"})},className:"post-form",children:[Object(c.jsx)("textarea",{name:"post",placeholder:"Escribe aqu\xed tu estado",autoComplete:"off",className:"post-text",value:i.post,onChange:s}),Object(c.jsx)(p,{isLoading:!1,children:Object(c.jsx)("button",{type:"submit",disabled:!i.post,children:"Publicar"})})]})})},I=function(){var e=function(){var e=function(){var e=Object(x.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.orderBy("date","desc").get();case 3:t=e.sent,n=[],t.forEach((function(e){n.push(Object(m.a)({id:e.id},e.data()))})),i.current&&r(Object(m.a)(Object(m.a)({},c),{},{data:n,loading:!1,error:null})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i.current&&r(Object(m.a)(Object(m.a)({},c),{},{data:null,loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=Object(a.useState)({action:e,data:[],loading:!0,error:null}),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return e(),function(){i.current=!1}}),[]),c}(),t=e.action,n=e.data,r=e.loading;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(k,{getAllPost:t}),Object(c.jsx)("div",{className:"content-list",children:Object(c.jsx)(p,{isLoading:r,children:(null===n||void 0===n?void 0:n.length)?n.map((function(e,t){return Object(c.jsx)(L,Object(m.a)(Object(m.a)({},e),{},{index:t}),e.id)})):Object(c.jsx)("p",{children:"No hay publicaciones"})})})]})},C=function(){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("header",{className:"post-banner",children:Object(c.jsx)(d.b,{to:u,className:"post-title",children:"Publicaciones"})}),Object(c.jsx)("section",{className:"post-section",children:Object(c.jsx)(l.d,{children:Object(c.jsx)(l.b,{exact:!0,path:u,component:I})})})]})},P=function(){return Object(c.jsx)(d.a,{children:Object(c.jsx)("div",{className:"main",children:Object(c.jsxs)(l.d,{children:[Object(c.jsx)(l.b,{path:u,component:C}),Object(c.jsx)(l.b,{path:b,component:j}),Object(c.jsx)(l.a,{to:u})]})})})},z=n(30),B=n.n(z),M=(n(44),function(){var e=Object(a.useState)({isShow:!1,title:"",desc:"",icon:""}),t=Object(o.a)(e,2),n=t[0],r=t[1],i=n.isShow,s=n.title,d=n.desc,l=n.icon;Object(a.useEffect)((function(){i&&B.a.fire({title:s,text:d,icon:l||"success",confirmButtonText:"Aceptar"})}),[n]);var j=function(e){var t=Object(a.useRef)(!0),n=Object(a.useState)({data:null,loading:!0,error:null}),c=Object(o.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){return function(){t.current=!1}}),[]),Object(a.useEffect)((function(){function n(){return(n=Object(x.a)(f.a.mark((function n(){var c,a,r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return c=n.sent,n.next=6,c.json();case 6:a=n.sent,r=a.data,t.current&&i({loading:!1,error:null,data:r}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),i({data:null,loading:!1,error:"No se pudo cargar la info"});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e]),r}(O),u=j.data,b=j.loading;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(p,{isLoading:b,children:Object(c.jsx)(v,{value:{stateModal:n,setStateModal:r,lang:u},children:Object(c.jsx)(P,{})})})})});s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.38015795.chunk.js.map