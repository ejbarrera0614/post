(this["webpackJsonppublicaciones-app"]=this["webpackJsonppublicaciones-app"]||[]).push([[0],{44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(2),r=n.n(a),i=n(28),s=n.n(i),o=n(4),u=n(10),l=n(16),d=n(6),j={ROUTE_HOME:"/",ROUTE_REGISTER:"/registro",ROUTE_ERROR:"/error",ACTION_CREATE:"crear",ACTION_EDIT:"editar",ENDPOINT_LANG_ES:"data/lang-es.json",COLLECTION_POST:"publication-test",COLLECTION_COMMENTS:"comments",COLLECTION_REACTIONS:"reactions",COLLECTION_USERS:"users",REACTION_LIKE:"like",REACTION_DISLIKE:"dislike",REACTION_AMAZING:"amazing",IS_LOGGED:"isLoggedIn"},O=n(3),b=function(e){var t=e.children,n=e.isLoading,a=void 0===n||n;return Object(c.jsx)(c.Fragment,{children:a?Object(c.jsxs)("div",{className:"lds-ring",children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]}):Object(c.jsx)(c.Fragment,{children:t})})},m=n(7),p=n.n(m),f=n(13),h=Object(a.createContext)([]),x=h.Provider,g=h,v=n(24);n(37);v.a.initializeApp({apiKey:"AIzaSyCNmqLe1d9z6esEbyQQ4wcIFA9EUA-Z0H4",authDomain:"publicaciones-999c8.firebaseapp.com",projectId:"publicaciones-999c8",storageBucket:"publicaciones-999c8.appspot.com",messagingSenderId:"551474545342",appId:"1:551474545342:web:09126c401dd5f503f4d4ef"});var N=v.a.firestore(),E=N.collection(j.COLLECTION_POST),C=n.p+"static/media/userIcon.18fcee80.png",S=function(e){var t=e.nameAuthor,n=e.desc,a=e.date,r=new Date(null===a||void 0===a?void 0:a.toDate()).toLocaleDateString();return Object(c.jsxs)("div",{className:"comment",children:[Object(c.jsx)("div",{className:"item-profile",children:Object(c.jsx)("img",{className:"profile-img",src:C,alt:t})}),Object(c.jsxs)("div",{className:"comment-section",children:[Object(c.jsx)("p",{className:"title-name",children:t}),Object(c.jsx)("p",{children:n}),Object(c.jsx)("p",{className:"text-time w-100",children:r})]})]})},I=N.collection(j.COLLECTION_POST),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1],i=function(){r(e)},s=function(e){var t=e.target;r(Object(O.a)(Object(O.a)({},c),{},Object(u.a)({},t.name,t.value)))};return[c,s,i]},T=function(e){var t=e.actionGet,n=e.idPublication,r=e.textAreaCommentRef,i=Object(a.useContext)(g).stateUser,s=R({comment:""}),u=Object(o.a)(s,3),l=u[0],d=u[1],m=u[2],p=function(){var e=Object(a.useContext)(g).setStateModal,t=Object(a.useState)({action:function(t,n){r(Object(O.a)(Object(O.a)({},c),{},{loading:!0})),I.doc(t).collection(j.COLLECTION_COMMENTS).add(n).then((function(e){e.set({id:e.id},{merge:!0}).then((function(){r(Object(O.a)(Object(O.a)({},c),{},{loading:!1,error:null,isFirtsRender:!1}))}))})).catch((function(){r(Object(O.a)(Object(O.a)({},c),{},{loading:!1,error:"Ocurrio un error",isFirtsRender:!1})),e({isShow:!0,title:"Ocurri\xf3 un error.",desc:"No se pudo agregar el comentaro, intenta m\xe1s tarde.",icon:"error"})}))},loading:!1,error:null,isFirtsRender:!0}),n=Object(o.a)(t,2),c=n[0],r=n[1];return c}(),f=p.action,h=p.loading,x=p.isFirtsRender;Object(a.useEffect)((function(){x||h||(m(),t())}),[h]);var v=function(e){e.preventDefault(),f(n,{date:new Date,desc:l.comment.trimStart().trimEnd(),idAuthor:i.id,nameAuthor:i.userName}),m()};return Object(c.jsx)(c.Fragment,{children:i.isLoggedIn?Object(c.jsxs)("form",{onSubmit:v,className:"comment-form ",children:[Object(c.jsx)("textarea",{ref:r,name:"comment",placeholder:"Escribe un comentario",autoComplete:"off",rows:"1",className:"comment",value:l.comment,onChange:d,onKeyPress:function(e){13===e.which&&!e.shiftKey&&l.comment.trim()&&v(e)}}),Object(c.jsx)(b,{isLoading:!1,children:Object(c.jsx)("button",{type:"submit",disabled:!l.comment.trim(),children:Object(c.jsx)("span",{children:"Publicar"})})})]}):Object(c.jsx)("p",{className:"msgInfoAddComment",children:"Inicia sesi\xf3n para poder comentar"})})},A=n.p+"static/media/like.af5d7d6e.svg",L=n.p+"static/media/dislike.0ac9267e.svg",w=n.p+"static/media/amazing.8fe6536c.svg",_=N.collection(j.COLLECTION_POST),y=function(e){var t=e.idPublication,n=e.setReactionsState,r=e.textAreaCommentRef,i=Object(a.useState)(""),s=Object(o.a)(i,2),l=s[0],d=s[1],b=Object(a.useContext)(g).stateUser,m=function(e){var t=function(){try{var t=function(){var t=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.doc(e).collection(j.COLLECTION_REACTIONS).get();case 2:t.sent.forEach((function(e){n.push(e.data())})),s.current&&i(Object(O.a)(Object(O.a)({},r),{},{data:n,loading:!1,error:null}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=[];t()}catch(c){i(Object(O.a)(Object(O.a)({},r),{},{data:null,loading:!1,error:c}))}},n=Object(a.useState)({action:t,data:[],loading:!0,error:null}),c=Object(o.a)(n,2),r=c[0],i=c[1],s=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return s.current=!0,t(),function(){s.current=!1}}),[]),r}(t),h=m.action,x=m.data,v=function(){var e=Object(a.useContext)(g).setStateModal,t=Object(a.useState)({action:function(t,n){n.idAuthor?(r(Object(O.a)(Object(O.a)({},c),{},{loading:!0})),_.doc(t).collection(j.COLLECTION_REACTIONS).doc(n.idAuthor).set(n).then((function(){r(Object(O.a)(Object(O.a)({},c),{},{loading:!1,error:null,isFirtsRender:!1}))})).catch((function(t){console.log(t),r(Object(O.a)(Object(O.a)({},c),{},{loading:!1,error:"Ocurrio un error",isFirtsRender:!1})),e({isShow:!0,title:"Ocurri\xf3 un error.",desc:"No fue posible reaccionar a la publicaci\xf3n, intenta m\xe1s tarde.",icon:"error"})}))):e({isShow:!0,title:"Atenci\xf3n.",desc:"Debe iniciar sesi\xf3n para poder reaccionar",icon:"info"})},loading:!1,error:null,isFirtsRender:!0}),n=Object(o.a)(t,2),c=n[0],r=n[1];return c}(),N=v.action,E=v.loading,C=v.isFirtsRender,S=!1;Object(a.useEffect)((function(){C||E||h()}),[E]),Object(a.useEffect)((function(){var e,t=x.reduce((function(e,t){var n=t.type,c=t.idAuthor;return e[n]||(e[n]=0),e[n]+=1,c===b.id&&d(n),e}),(e={},Object(u.a)(e,j.REACTION_AMAZING,0),Object(u.a)(e,j.REACTION_DISLIKE,0),Object(u.a)(e,j.REACTION_LIKE,0),e));n(t)}),[x]),Object(a.useEffect)((function(){var e={};try{x.forEach((function(t){var n=t.type;if(t.idAuthor===b.id)throw d(n),e}))}catch(t){if(t!==e)throw t}}),[b]);var I=function(e){e?(S=!0,document.querySelector("#popover-".concat(t)).classList.add("active-hover")):S&&setTimeout((function(){S=!1,document.querySelector("#popover-".concat(t)).classList.remove("active-hover")}),1e3)},R=function(e){N(t,{type:e,idAuthor:b.id}),!S&&setTimeout((function(){S=!1,document.querySelector("#popover-".concat(t)).classList.remove("active-hover")}),1e3)};return Object(c.jsxs)("div",{className:"publication-item-buttons popover",children:[Object(c.jsxs)("p",{className:"trigger-popover",onMouseEnter:function(){I(!0)},onMouseLeave:function(){I(!1)},children:[l===j.REACTION_LIKE&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:A,alt:"like"})," Me Gusta"]}),l===j.REACTION_DISLIKE&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:L,alt:"like"})," No me Gusta"]}),l===j.REACTION_AMAZING&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("img",{src:w,alt:"like"})," Asombroso"]}),!l&&"Reacccionar"]}),Object(c.jsx)("p",{onClick:function(e){e.preventDefault(),b[j.IS_LOGGED]&&r.current.focus()},className:!b[j.IS_LOGGED]&&"focusToTextActive",children:"Comentar"}),Object(c.jsxs)("div",{id:"popover-".concat(t),className:"popover-content",children:[Object(c.jsx)("div",{className:"arrow"}),Object(c.jsx)("img",{src:A,alt:"like",className:"ml-10",onClick:function(){return R(j.REACTION_LIKE)}}),Object(c.jsx)("img",{src:L,alt:"dislike",onClick:function(){return R(j.REACTION_DISLIKE)}}),Object(c.jsx)("img",{src:w,alt:"amazing",onClick:function(){return R(j.REACTION_AMAZING)}})]})]})},k=function(e){var t,n=e.id,r=e.desc,i=e.nameAuthor,s=e.date,l=Object(a.useState)((t={},Object(u.a)(t,j.REACTION_AMAZING,0),Object(u.a)(t,j.REACTION_DISLIKE,0),Object(u.a)(t,j.REACTION_LIKE,0),t)),d=Object(o.a)(l,2),b=d[0],m=d[1],h=Object(a.useRef)(),x=function(e){var t=function(){try{var t=function(){var t=Object(f.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.doc(e).collection(j.COLLECTION_COMMENTS).orderBy("date","desc").get();case 2:t.sent.forEach((function(e){n.push(e.data())})),s.current&&i(Object(O.a)(Object(O.a)({},r),{},{data:n,loading:!1,error:null}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=[];t()}catch(c){i(Object(O.a)(Object(O.a)({},r),{},{data:null,loading:!1,error:c}))}},n=Object(a.useState)({action:t,data:[],loading:!0,error:null}),c=Object(o.a)(n,2),r=c[0],i=c[1],s=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return s.current=!0,t(),function(){s.current=!1}}),[]),r}(n),g=x.action,v=x.data,N=new Date(null===s||void 0===s?void 0:s.toDate()).toLocaleDateString();return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("div",{className:"publication-item my-2 ",children:[Object(c.jsxs)("div",{className:"publication-item-content",children:[Object(c.jsx)("div",{className:"item-profile",children:Object(c.jsx)("img",{className:"profile-img",src:C,alt:i})}),Object(c.jsxs)("div",{className:"publication-item-desc",children:[Object(c.jsxs)("div",{className:"publication-desc-group-name",children:[Object(c.jsx)("p",{className:"publication-item-name title-name",children:i}),Object(c.jsx)("p",{className:"publication-item-time text-time",children:N})]}),Object(c.jsx)("p",{children:r}),Object(c.jsx)(y,{idPublication:n,setReactionsState:m,textAreaCommentRef:h})]})]}),Object(c.jsxs)("div",{className:"publication-item-reaction",children:[Object(c.jsxs)("div",{className:"reactions-group-circles",children:[(null===b||void 0===b?void 0:b.like)>0&&Object(c.jsx)("div",{className:"circle-likes"}),(null===b||void 0===b?void 0:b.dislike)>0&&Object(c.jsx)("div",{className:"circle-dislike"}),(null===b||void 0===b?void 0:b.amazing)>0&&Object(c.jsx)("div",{className:"circle-amazing"}),Object(c.jsx)("p",{children:(null===b||void 0===b?void 0:b.amazing)+(null===b||void 0===b?void 0:b.like)+(null===b||void 0===b?void 0:b.dislike)})]}),Object(c.jsx)("p",{children:v.length>0&&Object(c.jsxs)(c.Fragment,{children:[v.length," comentario",v.length>1&&"s"]})})]}),Object.keys(v).length>0&&Object(c.jsx)("div",{className:"comments-list",children:v.map((function(e,t){return Object(c.jsx)("div",{children:Object(c.jsx)(S,Object(O.a)(Object(O.a)({},e),{},{index:t}))},e.id)}))}),Object(c.jsx)(T,{actionGet:g,idPublication:n,textAreaCommentRef:h})]})})},F=N.collection(j.COLLECTION_USERS),D=function(){var e=R({userName:"",password:""}),t=Object(o.a)(e,3),n=t[0],r=t[1],i=t[2],s=function(){var e=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userName,a=t.password,e.prev=1,r(Object(O.a)(Object(O.a)({},c),{},{loading:!0})),e.next=5,F.where("userName","==",n).where("password","==",a).limit(1).get();case 5:i=e.sent,s={},i.size?i.forEach((function(e){var t=e.data();console.log(t),t&&(s={id:t.id,userName:t.userName,isAdmin:t.isAdmin,isLoggedIn:!0})})):(d("Confirmaci\xf3n","El usuario y/o la contrase\xf1a no son correctos","info"),r(Object(O.a)(Object(O.a)({},c),{},{loading:!1}))),l.current&&(u(s),r(Object(O.a)(Object(O.a)({},c),{},{loading:!1,error:null}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),l.current&&(d("Avis\xf3","No se ha podido iniciar sesi\xf3n, intente de nuevo","info"),r(Object(O.a)(Object(O.a)({},c),{},{loading:!1,error:e.t0})));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),t=Object(a.useState)({action:e,loading:!1,error:null}),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useContext)(g),s=i.setStateModal,u=i.setStateUser,l=Object(a.useRef)(!0);Object(a.useEffect)((function(){return function(){l.current=!1}}),[]);var d=function(e,t,n){s({isShow:!0,title:e,desc:t,icon:n})};return c}(),u=s.action,d=s.loading;Object(a.useEffect)((function(){d&&i()}),[d]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u(n)},className:"form-login",children:[Object(c.jsx)("p",{className:"login-title",children:"Inicia sesi\xf3n"}),Object(c.jsxs)("div",{className:"section-inputs",children:[Object(c.jsx)("div",{className:"input-group",children:Object(c.jsx)("input",{type:"text",id:"user",name:"userName",autoComplete:"off",onChange:r,value:n.userName,placeholder:"Usuario"})}),Object(c.jsx)("div",{className:"input-group",children:Object(c.jsx)("input",{type:"password",id:"pass",name:"password",autoComplete:"off",onChange:r,placeholder:"Contrase\xf1a",value:n.password})})]}),Object(c.jsx)(b,{isLoading:d,children:Object(c.jsxs)("div",{className:"section-buttons",children:[Object(c.jsx)("button",{type:"submit",disabled:!n.userName||!n.password,children:"Iniciar sesi\xf3n"}),Object(c.jsxs)("p",{children:["\xbfEres nuevo? ",Object(c.jsx)(l.b,{to:j.ROUTE_REGISTER,children:"Reg\xedstrese"})]})]})})]})})},M=function(){var e=R({userName:"",password:"",passwordRepeat:""}),t=Object(o.a)(e,3),n=t[0],r=t[1],i=t[2],s=n.userName,u=n.password,d=n.passwordRepeat,m=function(){var e=function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(Object(O.a)(Object(O.a)({},s),{},{loading:!0})),e.next=3,F.where("userName","==",t.userName).limit(1).get();case 3:if(!e.sent.size){e.next=8;break}return u(Object(O.a)(Object(O.a)({},s),{},{loading:!1})),l("Aviso","El usuario ya existe","info"),e.abrupt("return");case 8:F.add(t).then((function(e){e.set({id:e.id},{merge:!0}).then((function(){u(Object(O.a)(Object(O.a)({},s),{},{loading:!1,error:null,isFirtsRender:!1})),l("Confirmaci\xf3n","Se ha registrado exitosamente.","info"),c({id:e.id,userName:t.userName,isAdmin:!1,isLoggedIn:!0})})).catch((function(e){l("Ocurri\xf3 un error.","No se pudo crear el usuario, intenta m\xe1s tarde.","error")}))})).catch((function(){u(Object(O.a)(Object(O.a)({},s),{},{loading:!1,error:"Ocurrio un error",isFirtsRender:!1})),l("Ocurri\xf3 un error.","No se pudo crear el usuario, intenta m\xe1s tarde.","error")}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=Object(a.useContext)(g),n=t.setStateModal,c=t.setStateUser,r=Object(a.useState)({action:e,loading:!1,error:null,isFirtsRender:!0}),i=Object(o.a)(r,2),s=i[0],u=i[1],l=function(e,t,c){n({isShow:!0,title:e,desc:t,icon:c})};return s}(),h=m.action,x=m.loading;Object(a.useEffect)((function(){x||i()}),[x]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h({userName:s,password:u})},className:"form-register",children:[Object(c.jsx)("p",{className:"register-title",children:"Registro"}),Object(c.jsxs)("div",{className:"section-inputs",children:[Object(c.jsx)("div",{className:"input-group",children:Object(c.jsx)("input",{type:"text",id:"user",name:"userName",autoComplete:"off",onChange:r,value:s,placeholder:"Usuario"})}),Object(c.jsx)("div",{className:"input-group",children:Object(c.jsx)("input",{type:"password",id:"pass",name:"password",autoComplete:"off",onChange:r,placeholder:"Contrase\xf1a",value:u})}),Object(c.jsxs)("div",{className:"input-group",children:[Object(c.jsx)("input",{type:"password",id:"passRepeat",name:"passwordRepeat",autoComplete:"off",onChange:r,placeholder:"Repetir contrase\xf1a",value:d}),u!==d&&Object(c.jsx)("p",{className:"pass-error",children:"Las contrase\xf1as no coinciden"})]})]}),Object(c.jsx)(b,{isLoading:x,children:Object(c.jsxs)("div",{className:"section-buttons",children:[Object(c.jsx)("button",{type:"submit",disabled:!s||!u||!d||u!==d,children:"Registrarse"}),Object(c.jsxs)("p",{children:["\xbfYa tienes cuenta? ",Object(c.jsx)(l.b,{to:j.ROUTE_HOME,children:"Inicia sesi\xf3n"})]})]})})]})})},U=function(e){var t=e.getAllPublication,n=Object(a.useContext)(g).stateUser,r=R({publication:""}),i=Object(o.a)(r,3),s=i[0],u=i[1],l=i[2],m=function(){var e=function(){var e=Object(f.a)(p.a.mark((function e(n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i(Object(O.a)(Object(O.a)({},r),{},{loading:!0})),E.add(n).then((function(e){e.set({id:e.id},{merge:!0}).then((function(){i(Object(O.a)(Object(O.a)({},r),{},{loading:!1,error:null,isFirtsRender:!1})),t({title:"Estado creado",desc:"Se ha creado la publicaci\xf3n",isShow:!0})}))})).catch((function(){i(Object(O.a)(Object(O.a)({},r),{},{loading:!1,error:"Ocurrio un error",isFirtsRender:!1})),t({isShow:!0,title:"Ocurri\xf3 un error.",desc:"No se pudo crear la publicaci\xf3n, intenta m\xe1s tarde.",icon:"error"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=Object(a.useContext)(g).setStateModal,n=Object(a.useState)({action:e,loading:!1,error:null,isFirtsRender:!0}),c=Object(o.a)(n,2),r=c[0],i=c[1];return r}(),h=m.action,x=m.loading,v=m.isFirtsRender;Object(a.useEffect)((function(){v||x||(l(),t())}),[x]);return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(d.d,{children:n[j.IS_LOGGED]?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(d.a,{to:j.ROUTE_HOME}),Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h({date:new Date,desc:s.publication,idAuthor:n.id,nameAuthor:n.userName})},className:"publication-form",children:[Object(c.jsx)("textarea",{name:"publication",placeholder:"Escriba aqu\xed su estado",autoComplete:"off",className:"publication-text",value:s.publication,onChange:u}),Object(c.jsx)(b,{isLoading:!1,children:Object(c.jsx)("button",{type:"submit",disabled:!s.publication,children:"Publicar"})})]})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(d.b,{exact:!0,path:j.ROUTE_HOME,component:D}),Object(c.jsx)(d.b,{exact:!0,path:j.ROUTE_REGISTER,component:M})]})})})},G=function(){var e=function(){var e=function(){var e=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.orderBy("date","desc").get();case 3:t=e.sent,n=[],t.forEach((function(e){n.push(Object(O.a)({id:e.id},e.data()))})),i.current&&r(Object(O.a)(Object(O.a)({},c),{},{data:n,loading:!1,error:null})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),i.current&&r(Object(O.a)(Object(O.a)({},c),{},{data:null,loading:!1,error:e.t0}));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=Object(a.useState)({action:e,data:[],loading:!0,error:null}),n=Object(o.a)(t,2),c=n[0],r=n[1],i=Object(a.useRef)(!0);return Object(a.useEffect)((function(){return e(),function(){i.current=!1}}),[]),c}(),t=e.action,n=e.data,r=e.loading;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(U,{getAllPublication:t}),Object(c.jsx)("div",{className:"content-list",children:Object(c.jsx)(b,{isLoading:r,children:(null===n||void 0===n?void 0:n.length)?n.map((function(e,t){return Object(c.jsx)(k,Object(O.a)(Object(O.a)({},e),{},{index:t}),e.id)})):Object(c.jsx)("p",{children:"No hay publicaciones"})})})]})},P=n.p+"static/media/exit.cc46a70e.svg",K=function(){var e=Object(a.useContext)(g),t=e.stateUser,n=e.logout;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("header",{className:"publication-banner",children:[Object(c.jsx)(l.b,{to:j.ROUTE_HOME,className:"publication-title",children:"Publicaciones"}),t.isLoggedIn&&Object(c.jsxs)("div",{className:"user-logged",children:[Object(c.jsxs)("p",{style:{marginLeft:"auto"},children:["Bienvenido, ",t.userName," "]}),Object(c.jsx)("img",{src:P,alt:"exit",onClick:function(e){e.preventDefault(),n()}})]})]}),Object(c.jsx)("section",{className:"publication-section",children:Object(c.jsx)(d.d,{children:Object(c.jsx)(d.b,{exact:!0,path:[j.ROUTE_HOME,j.ROUTE_REGISTER],component:G})})})]})},z=function(){return Object(c.jsx)(l.a,{children:Object(c.jsx)("div",{className:"main",children:Object(c.jsx)(d.d,{children:Object(c.jsx)(d.b,{path:j.ROUTE_ROUTE_HOME,component:K})})})})},H=n(30),B=n.n(H),Z=(n(44),Object(u.a)({},j.IS_LOGGED,!1)),q=function(){var e=Object(a.useState)({isShow:!1,title:"",desc:"",icon:""}),t=Object(o.a)(e,2),n=t[0],r=t[1],i=function(e,t){var n=Object(a.useState)((function(){try{var n=window.sessionStorage.getItem(e);return n?JSON.parse(n):t}catch(c){return t}})),c=Object(o.a)(n,2),r=c[0],i=c[1];return[r,function(n){try{i(n),window.sessionStorage.setItem(e,JSON.stringify(n))}catch(c){i(t)}}]}("user",Z),s=Object(o.a)(i,2),u=s[0],l=s[1],d=n.isShow,O=n.title,m=n.desc,h=n.icon;Object(a.useEffect)((function(){d&&B.a.fire({title:O,text:m,icon:h||"success",confirmButtonText:"Aceptar",buttonsStyling:!1})}),[n]);var g=function(e){var t=Object(a.useRef)(!0),n=Object(a.useState)({data:null,loading:!0,error:null}),c=Object(o.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){return function(){t.current=!1}}),[]),Object(a.useEffect)((function(){function n(){return(n=Object(f.a)(p.a.mark((function n(){var c,a,r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(e);case 3:return c=n.sent,n.next=6,c.json();case 6:a=n.sent,r=a.data,t.current&&i({loading:!1,error:null,data:r}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),i({data:null,loading:!1,error:"No se pudo cargar la info"});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[e]),r}(j.ENDPOINT_LANG_ES),v=g.data,N=g.loading;return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(b,{isLoading:N,children:Object(c.jsx)(x,{value:{stateModal:n,setStateModal:r,lang:v,stateUser:u,setStateUser:l,logout:function(){l("user",Z)}},children:Object(c.jsx)(z,{})})})})};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(q,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.c633eb44.chunk.js.map